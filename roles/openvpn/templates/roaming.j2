#########################################################################
####     AUTO GENERATED by Ansible, DO NOT EDIT                      ####
#########################################################################

port {{ vpn.port }}
dev tun
proto {{ protocol }}
writepid /run/openvpn/{{name}}-{{protocol}}.pid

tls-server
server {{ vpn.local_net }} {{ vpn.local_mask }}
push "redirect-gateway def1"

plugin /usr/lib64/openvpn/plugins/openvpn-plugin-auth-pam.so "login login USERNAME password PASSWORD"
ifconfig-pool-persist ipp-{{name}}-{{protocol}}.txt
username-as-common-name
verify-client-cert none

dh /etc/openvpn/dhparams.pem
ca /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
cert /etc/pki/tls/private/{{name}}.pem
key /etc/pki/tls/private/{{name}}.pem

verb 3

#management 127.0.0.1 8889

keepalive 10 120
cipher AES-256-GCM
auth SHA256

{% if protocol == 'udp' %}
mtu-test
{% endif %}

persist-key
persist-tun

status /var/log/openvpn-{{name}}-{{protocol}}.status
log-append /var/log/openvpn-{{name}}-{{protocol}}.log
duplicate-cn

daemon
